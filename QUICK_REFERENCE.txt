╔═══════════════════════════════════════════════════════════════════════╗
║           NCU Accommodation Portal - 快速參考卡片                      ║
╚═══════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────┐
│ 🌐 網站訪問                                                          │
├─────────────────────────────────────────────────────────────────────┤
│ 主網站: https://rooms.student.ncu.edu.tw                            │
│ 登入頁: https://rooms.student.ncu.edu.tw/login                      │
│ 管理後台: https://rooms.student.ncu.edu.tw/admin                    │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│ 🔐 OAuth 配置 (已根據您提供的圖片設定)                               │
├─────────────────────────────────────────────────────────────────────┤
│ Client ID:     20250918165350qQGrRKwccnPj                           │
│ Client Secret: yCBZ4wijlSYsCTpO6B6UsnzzS7BiuGmftrQxlBhEl4qcGkq1YzJ  │
│ Redirect URI:  https://rooms.student.ncu.edu.tw/auth/callback       │
│ Login URL:     https://rooms.student.ncu.edu.tw/auth/login          │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│ ⚙️  服務管理                                                          │
├─────────────────────────────────────────────────────────────────────┤
│ 重啟後端:     sudo systemctl restart ncu-accommodation-backend.service│
│ 查看後端狀態: sudo systemctl status ncu-accommodation-backend.service │
│ 查看後端日誌: sudo journalctl -u ncu-accommodation-backend -f       │
│                                                                      │
│ 重啟 Nginx:   sudo systemctl restart nginx                          │
│ 測試 Nginx:   sudo nginx -t                                         │
│ Nginx 日誌:   sudo tail -f /var/log/nginx/error.log                 │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│ 🚀 部署命令                                                           │
├─────────────────────────────────────────────────────────────────────┤
│ 完整部署:     cd /var/www/ncu-accommodation-portal && ./deploy.sh   │
│ 健康檢查:     cd /var/www/ncu-accommodation-portal && ./check-health.sh│
│ 驗證配置:     cd /var/www/ncu-accommodation-portal && ./verify-config.sh│
│                                                                      │
│ 僅構建前端:   cd /var/www/ncu-accommodation-portal && npm run build │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│ 📊 系統狀態                                                           │
├─────────────────────────────────────────────────────────────────────┤
│ ✅ 後端服務:   運行中 (conda環境: ncu, 端口: 5000)                   │
│ ✅ Nginx:      運行中 (端口: 80, 443)                                │
│ ✅ 前端構建:   完成 (/var/www/ncu-accommodation-portal/dist)         │
│ ✅ API測試:    正常 (curl https://rooms.student.ncu.edu.tw/api/stats)│
│ ✅ 資料庫:     SQLite (136K)                                         │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│ 🐛 問題排查                                                           │
├─────────────────────────────────────────────────────────────────────┤
│ 1. API 無法訪問:                                                     │
│    → ss -tlnp | grep 5000  (檢查後端端口)                           │
│    → sudo systemctl status ncu-accommodation-backend.service        │
│                                                                      │
│ 2. OAuth 失敗:                                                       │
│    → ./verify-config.sh  (驗證配置)                                 │
│    → 檢查 backend/.env 中的認證資訊                                  │
│                                                                      │
│ 3. 前端無法訪問:                                                     │
│    → 確認 dist 目錄存在                                              │
│    → sudo nginx -t && sudo systemctl restart nginx                  │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│ 📁 重要文件路徑                                                       │
├─────────────────────────────────────────────────────────────────────┤
│ 後端配置:   /var/www/ncu-accommodation-portal/backend/.env          │
│ 前端配置:   /var/www/ncu-accommodation-portal/.env.production       │
│ Nginx配置:  /etc/nginx/sites-available/default                      │
│ 系統服務:   /etc/systemd/system/ncu-accommodation-backend.service   │
│ 資料庫:     /var/www/ncu-accommodation-portal/backend/data.sqlite   │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│ 📝 注意事項                                                           │
├─────────────────────────────────────────────────────────────────────┤
│ • 所有認證資訊已根據您提供的圖片正確配置                             │
│ • 後端使用 conda 的 ncu 環境                                         │
│ • 網站已部署為生產模式 (HTTPS)                                       │
│ • 完整文檔請查看: DEPLOYMENT_SUMMARY.md                              │
└─────────────────────────────────────────────────────────────────────┘

部署時間: 2025-10-01 13:53 UTC
部署狀態: ✅ 成功
